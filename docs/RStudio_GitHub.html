<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>RStudio &amp; GitHub</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">RStudio &amp; GitHub</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="getting-comfortable-with-github" class="level1">
<h1>Getting Comfortable with GitHub</h1>
<p>Hopefully you now have some idea about the purpose of git/github. Github is an online hosting service for git repositories. If you’ve never used git and GitHub before it is really quite intimidating. Let’s start with some practice!</p>
<ul>
<li>First, go to&nbsp;<a href="http://github.com" target="_blank" rel="noopener">github.com</a> and signup for a github account (if you haven’t already)</li>
<li>Once you have an account,&nbsp;<a href="https://guides.github.com/activities/hello-world/" target="_blank" rel="noopener">read this introduction to github</a> here</li>
<li>Follow the steps to create your first repository, fork, and merge!</li>
</ul>
<p>Once you’ve completed the above part. You should download git to your computer.</p>
<ul>
<li>See the installing git page:&nbsp;<a href="https://gitforwindows.org/" target="_blank" rel="noopener">https://gitforwindows.org/</a></li>
<li>There aren’t many things to select but go ahead and include the bash terminal if that’s an option.</li>
<li>There is a lot of info about installing and troubleshooting here: <a href="https://happygitwithr.com/install-git" target="_blank" rel="noopener">https://happygitwithr.com/install-git</a>
</li>
</ul>
<p>Now read through the <a href="https://happygitwithr.com/hello-git" target="_blank" rel="noopener">introduce yourself to git</a> chapter of happygitwithr.</p>
<ul>
<li>For those that want to use the shell/terminal: Mac has a native shell/terminal/command line interpreter (usually called terminal in your launchpad area). &nbsp;For windows folks, after you’ve installed git you’ll have access to the git bash terminal. &nbsp;Access this by clicking on the start menu and typing in bash. &nbsp;</li>
</ul>
<p>Great, now try to work through <a href="https://happygitwithr.com/https-pat" target="_blank" rel="noopener">chapters 9, 11, and 12</a>.</p>
</section>
<section id="local-vs-remote-work" class="level1">
<h1>Local vs Remote Work</h1>
<p>Mostly you’ll want to work on your local computer. Install <code>git</code> on your computer!</p>
<p>Workflow:</p>
<ol type="1">
<li><p>(Initially) <strong>clone</strong> the repo locally. (Later) <strong>pull</strong> to get most recent versions of files from the remote (GitHub)</p></li>
<li><p>Work and make changes</p></li>
<li><p><strong>add</strong> and <strong>commit</strong> to changes you like</p></li>
<li><p><strong>push</strong> changes to remote repo (on github)</p></li>
</ol>
<p>When considering our data science workflow, we want to have a seamless way to</p>
<ul>
<li>work on our project</li>
<li>utilize version control</li>
<li>use local file paths for ease of sharing code</li>
<li>collaborate with others</li>
</ul>
<p>All of this can be accomplished using R projects with git and github!</p>
<section id="r-projects" class="level2">
<h2 class="anchored" data-anchor-id="r-projects">R Projects</h2>
<p>First, it is important to know that we are going to be reading in some files <em>locally</em>. That is, from a folder somewhere on your computer (as opposed to reading a file in from the web). That means we need to be able to tell R where a file exists on our computer.</p>
<section id="locating-files" class="level3">
<h3 class="anchored" data-anchor-id="locating-files">Locating Files</h3>
<p><strong>How does R locate the file?</strong></p>
<ul>
<li><p>We can give a <em>full path name</em> to the file</p>
<ul>
<li>ex: <code>C:/Users/jbpost2/Documents/Repos/ST-558/datasets/</code></li>
<li>ex: <code>C:\\\\Users\\\\jbpost2\\\\Documents\\\\Repos\\\\ST-558\\\\datasets</code></li>
</ul></li>
</ul>
<p>Note: The <code>\</code> character is called an <em>escape</em> character. This allows us to use different symbols and things when we are working within a <strong>string</strong> of text. For instance, <code>\n</code> is a line break. The <code>\</code> tells <code>R</code> to interpret the next character(s) in a different way than usual.</p>
<p>For example (cat is kind of like a different version of a print function):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Hi my names is Justin. I work at NC State."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hi my names is Justin. I work at NC State.</code></pre>
</div>
</div>
<p>with the <code>\n</code> in there we get a line break:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Hi my names is Justin.</span><span class="sc">\n</span><span class="st">I work at NC State."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hi my names is Justin.
I work at NC State.</code></pre>
</div>
</div>
<p>Therefore, when we specify a path to a file as a string, if we try to use a <code>\</code> we actually need two <code>\\</code> so that R knows we actually want a <code>\</code>! Confusing I know. But, we can just replace <code>\</code> with <code>/</code> in paths to files to avoid that.</p>
<ul>
<li><p>Full path names are not good to use generally!</p>
<ul>
<li>If you share your code with someone else, they don’t have the same folder structure, username, etc.</li>
<li>Instead, use a <em>relative</em> path. That is, a path from <code>R</code>’s current working directory (the place it looks by default)</li>
</ul></li>
<li><p>Determine <code>R</code>’s working directory via <code>getwd()</code> (get working directory)</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/Users/jbpost2/repos/eCOTS_2024"</code></pre>
</div>
</div>
<p>Now if I had my file in the same folder as my working directory, I don’t need to use a full path as R is looking in that folder by default. If I had the file <code>chickens.csv</code> in my working directory, I could tell R where it is via something like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"chickens.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Great! How do we set that working directory? Via <code>setwd()</code> (set working directory)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/jbpost2/Documents/Repos/ST-558/datasets/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>We can also set it via menus:</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/setwd.png" class="img-fluid" width="800"></p>
</div>
</div>
<ul>
<li><p>Ok, but our goal is to share our code with others so they can run it. We could say to our collaborators, “just to update that one line of code to change your working directory and make sure to have all the files in the same directory that we use for this analysis.” Clearly, that isn’t an efficient way to work….</p></li>
<li><p>Instead we can use R projects!</p></li>
</ul>
</section>
<section id="using-an-r-project" class="level3">
<h3 class="anchored" data-anchor-id="using-an-r-project">Using an R Project</h3>
<ul>
<li>As we often have many files associated with each analysis, it can make keeping analysis separate difficult. The project feature in RStudio is made to alleviate this!</li>
</ul>
<p>R projects provide a straightforward way to divide your work into multiple contexts. Each with their own:</p>
<ul>
<li>Working directory</li>
<li>Workspace (environment with stored data/objects)</li>
<li>History</li>
<li>Folder structure &amp; source documents</li>
</ul>
<p>They are very easy to create!</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/project.png" class="img-fluid" width="600"></p>
</div>
</div>
<ul>
<li><p>When you create an R project, you might note that it gets associated with a directory (or folder or repo). That folder is what the project uses as the working directory.</p>
<ul>
<li><p>This is important! This means if we can share an entire folder (with subfolders and everything else in the same <em>relative</em> place), another user can pick up an R project and the paths to things should work! (Assuming we’ve used relative paths for everything.)</p></li>
<li><p>That’s exactly how we’ll use R projects with github! Github is a remote folder (that can have subfolders and what-not). If we associate an R project with that folder and upload that, another user can download it and open that R project, allowing them to work seamlessly!</p></li>
</ul></li>
<li><p>You might create a new project for materials related to this course or for each homework assignment etc. It is up to you how much clarity you want on a specific folder/project you are working on.</p></li>
<li><p>Note you can quickly switch between projects in the upper right hand of RStudio or via the File menu.</p></li>
</ul>
<div class="cell" data-layout-align="right">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-right">
<figure class="figure">
<p><img src="img/project_switch.png" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="connecting-gitgithub-with-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="connecting-gitgithub-with-rstudio">Connecting Git/GitHub with RStudio</h2>
<p>Ideally we want to document our process, easily collaborate, and widely share our work</p>
<ul>
<li><p>For reproducibility, ideally we would save different versions of our analysis, write-up, etc. along the way</p></li>
<li><p>Remember that git is a version control software to help:</p>
<ul>
<li>Track the changes we <code>commit</code> to the files</li>
<li>Allow multiple users to work on the <strong>same</strong> project</li>
</ul></li>
<li><p>github is a hosting service that allows us to do Git-based projects on the internet and share them widely!</p></li>
</ul>
<p>Recall our basic workflow. First we create a repo on github (remotely). We then associate a folder on our local computer with that repo using git. Then we:</p>
<ul>
<li>Pull down most recent files (<code>git pull</code>) or do initial download (<code>git clone</code>)</li>
<li>Add files you want to keep changes to (<code>git add</code>)</li>
<li>Commit to the changes (<code>git commit</code>)</li>
<li>Push the changes to the remote repo (<code>git push</code>)</li>
</ul>
<p>Let’s go through some explicit steps to do this! <strong>Make sure you’ve downloaded git to your machine already (see earlier material on git/github)!</strong></p>
<section id="cloning-a-repo-working-in-rstudio" class="level3">
<h3 class="anchored" data-anchor-id="cloning-a-repo-working-in-rstudio">Cloning a Repo &amp; Working in RStudio</h3>
<p>We don’t want to use github.com web interface as that is inefficient.</p>
<ul>
<li><p>We can <code>clone</code> the repo (i.e.&nbsp;download the entire repo locally).</p></li>
<li><p>Repo main page has a green button. Click on that.</p>
<ul>
<li>Can download a zip and unzip it to an appropriate folder</li>
</ul></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/clone_repo_button.png" class="img-fluid" width="600"></p>
</div>
</div>
<ul>
<li><p>Better to clone the repo via the URL and use RStudio! Open RStudio,</p>
<ul>
<li>go to File –&gt; new project</li>
<li>select from version control</li>
<li>choose Git</li>
<li>paste in the repo link</li>
<li>select a directory to save this repo in</li>
<li>hit create project!</li>
</ul></li>
<li><p>Now have the files locally and this associates an R project with a git repo!</p></li>
<li><p>Try it with my repo here: <code>https://github.com/jbpost2/ZScores.git</code></p>
<ul>
<li>You won’t have access to push files to this repository though!</li>
</ul></li>
</ul>
<p>Try this out on your own! Create your own repo on github. Then try to download it as an R project.</p>
</section>
<section id="communication-between-github-and-rstudio" class="level3">
<h3 class="anchored" data-anchor-id="communication-between-github-and-rstudio">Communication Between Github and RStudio</h3>
<p>We need to make sure RStudio and github can communicate. This can sometimes be tough to get working! Do the following:</p>
<ul>
<li>Modify a file in the github repo you just created and downloaded (the one you own).</li>
<li>Go to the <code>Git</code> tab in your <code>Environment</code> area</li>
<li>You should see any files with changes</li>
<li>Can <code>add</code> files that you’d like to <code>commit</code> up to the remote repo</li>
<li>Click on all of the boxes (equivalent to <code>git add -A</code> when using the command line) and click the <code>Commit</code> button</li>
<li>A window pops up with a comparison of files. When satisfied, write a commit message in the box and click the <code>commit</code> button (equivalent to <code>git commit -m "message"</code> when using the command line)</li>
<li>Hit close on that window</li>
<li>Click the push button in the top right (equivalent to <code>git push</code> when using the command line)</li>
<li>You may be prompted to log-in in some way. If not, repo on gitub.com should show the changes!</li>
</ul>
</section>
<section id="using-the-command-line-interface-cli" class="level3">
<h3 class="anchored" data-anchor-id="using-the-command-line-interface-cli">Using the Command Line Interface (CLI)</h3>
<p>When working by myself on a repo, I’m not worried about merge conflicts with other people’s changes. As such, my workflow is as follows:</p>
<ul>
<li>Open the appropriate project in RStudio</li>
<li>Go to the Terminal and type <code>git pull</code></li>
<li>Work… at a good spot for saving, back to the terminal</li>
<li>Type <code>git add -A</code> to add all files that have been modified</li>
<li>Type <code>git commit -m "Message"</code> to stage a commit</li>
<li>Type <code>git push</code> to push the local changes to the remote repo</li>
</ul>
</section>
<section id="creating-a-repo-from-an-existing-r-project" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-repo-from-an-existing-r-project">Creating a Repo From an Existing R Project</h3>
<p>Sometimes you’ll have an R project that already exists but you don’t have a corresponding repo on GitHub. The easiest way to get that project into a repo is to do the following:</p>
<ul>
<li>Create a new repository on GitHub</li>
<li>Clone it to your computer via RStudio new project (in a different folder than your current project)</li>
<li>Move all the files from the R Project you already have into the new project folder</li>
<li><code>add</code>, <code>commit</code>, and <code>push</code> up the files</li>
</ul>
<p>Please pop this video out and watch it in the full panopto player!</p>
<iframe src="https://ncsu.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=5fb1955e-a720-4739-a404-b170018a55ee&amp;autoplay=false&amp;offerviewer=true&amp;showtitle=true&amp;showbrand=true&amp;captions=false&amp;interactivity=all" height="405" width="720" style="border: 1px solid #464646;" allowfullscreen="" allow="autoplay" aria-label="Panopto Embedded Video Player" aria-description="05 - Watch - R Projects &amp; Connecting with GitHub"></iframe>
<p><a href="./Creating_Web_Site.html">Check here for information about creating a web site with quarto and GitHub.</a></p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>